# Understanding The Solution With Copilot

> Let's learn how to _deconstruct_ a more complex open-source application project with the help of GitHub Copilot.

## 1: Explore Project Structure

Start by opening the project folder `03-space-game` to see the project structure. We see the following:

- `spaceArt` folder contains the images used in the game.
- `app.js` - the main JavaScript file that runs the game.
- `index.html` - the main HTML file that loads the game.
- `spritesheet.png` - the image file that contains all the sprites used.

We can get some intuition for what each file does based on the _type_ of file and the _name_ of the file. But let's dive deeper into the code to understand the project better.

## 2: Explore `index.html`

Open the `index.html` file in VS Code first. Then open Copilot Chat in the sidebar and type this prompt:

```text
@workspace /explain  how the selected code works.

Write your explanation in Markdown format, as two tables - each with name, description, usage as the 3 columns.

In table 1: identify the key HTML concepts used in the file in terms of high-level structural elements e.g., headings, lists etc. Put the name in column 1, a short description of the concept in column 2 and the specific example of its usage in column 3.

In table 2: Identify the HTML elements used in this file as concepts. Repeat the same exercise as before in terms of providing name, description and usage example.

In both cases, use beginner-friendly language suitable for a high-school audience and write with a clear and concise tone that focuses on a learner audience
```

> ðŸŒŸ | You may see something like this:

### Table 1: Key HTML Concepts

| Name               | Description                                                                     | Usage Example                                        |
| ------------------ | ------------------------------------------------------------------------------- | ---------------------------------------------------- |
| Document Structure | Defines the overall layout and elements of an HTML document.                    | The entire `<!DOCTYPE html>` to `</html>` structure. |
| Head Section       | Contains meta-information about the document, like its title and character set. | Everything within `<head>...</head>`.                |
| Body Section       | Contains the content of the document that is visible to users.                  | Everything within `<body>...</body>`.                |
| External Script    | Links an external JavaScript file to the HTML document.                         | `<script src="app.js"></script>`                     |

### Table 2: HTML Elements Used

| Name              | Description                                                                 | Usage Example                               |
| ----------------- | --------------------------------------------------------------------------- | ------------------------------------------- |
| `<!DOCTYPE html>` | Declares the document type and version of HTML.                             | `<!DOCTYPE html>`                           |
| `<html>`          | The root element of an HTML page.                                           | `<html>...</html>`                          |
| `<head>`          | Contains meta-information about the HTML document.                          | `<head>...</head>`                          |
| `<meta>`          | Specifies the character set for the HTML document.                          | `<meta charset="UTF-8" />`                  |
| `<title>`         | Defines the title of the document, shown in the browser's title bar or tab. | `<title>Space Game</title>`                 |
| `<body>`          | Contains the content of the HTML document that is visible on the web page.  | `<body>...</body>`                          |
| `<p>`             | Defines a paragraph.                                                        | `<p>Image to use:</p>` and `<p>Canvas:</p>` |
| `<canvas>`        | Used to draw graphics on a web page via scripting (usually JavaScript).     | `<canvas id="myCanvas"...></canvas>`        |
| `<script>`        | Used to embed a JavaScript file into the HTML document.                     | `<script src="app.js"></script>`            |

These tables provide a high-level overview of the structural elements and specific HTML elements used in the provided HTML document. Understanding these concepts is crucial for creating web pages and integrating them with stylesheets and scripts for dynamic content.

## 3: Explore `app.js`

Next, open the `app.js` file in VS Code. Then, open Copilot Chat in the sidebar and type this prompt:

```text
@workspace /explain  how the selected code works using the same table format as before.
```

> ðŸŒŸ | You may see something like this:

### Table 1: Key JavaScript Concepts

| Name                   | Description                                                                                                               | Usage Example                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Asynchronous Functions | Functions that allow JavaScript to perform tasks in the background, without blocking the execution of subsequent scripts. | [`window.onload = async () => {...}`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fvscode%2Fvscode-server%2Fbin%2Flinux-x64%2Ff1e16e1e6214d7c44d078b1f0607b2388f29d729%2Fextensions%2Fnode_modules%2Ftypescript%2Flib%2Flib.dom.d.ts%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A27720%2C%22character%22%3A0%7D%5D "../../vscode/vscode-server/bin/linux-x64/f1e16e1e6214d7c44d078b1f0607b2388f29d729/extensions/node_modules/typescript/lib/lib.dom.d.ts") |
| Canvas API             | Provides a means to draw graphics on a web page via JavaScript.                                                           | [`canvas.getContext('2d')`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A213%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js")                                                                                                                                                                   |
| Promises               | Objects representing the eventual completion (or failure) of an asynchronous operation.                                   | [`await loadTexture('...')`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A226%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js")                                                                                                                                                                  |

### Table 2: JavaScript Elements Used

| Name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Description                                                                                                                                                                                                                                                                                                                                                                                                     | Usage Example                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`window.onload`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fvscode%2Fvscode-server%2Fbin%2Flinux-x64%2Ff1e16e1e6214d7c44d078b1f0607b2388f29d729%2Fextensions%2Fnode_modules%2Ftypescript%2Flib%2Flib.dom.d.ts%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A27720%2C%22character%22%3A0%7D%5D "../../vscode/vscode-server/bin/linux-x64/f1e16e1e6214d7c44d078b1f0607b2388f29d729/extensions/node_modules/typescript/lib/lib.dom.d.ts")           | An event handler that runs a script once the page has fully loaded.                                                                                                                                                                                                                                                                                                                                             | [`window.onload = async () => {...}`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fvscode%2Fvscode-server%2Fbin%2Flinux-x64%2Ff1e16e1e6214d7c44d078b1f0607b2388f29d729%2Fextensions%2Fnode_modules%2Ftypescript%2Flib%2Flib.dom.d.ts%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A27720%2C%22character%22%3A0%7D%5D "../../vscode/vscode-server/bin/linux-x64/f1e16e1e6214d7c44d078b1f0607b2388f29d729/extensions/node_modules/typescript/lib/lib.dom.d.ts")   |
| [`document.getElementById`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fvscode%2Fvscode-server%2Fbin%2Flinux-x64%2Ff1e16e1e6214d7c44d078b1f0607b2388f29d729%2Fextensions%2Fnode_modules%2Ftypescript%2Flib%2Flib.dom.d.ts%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A27567%2C%22character%22%3A0%7D%5D "../../vscode/vscode-server/bin/linux-x64/f1e16e1e6214d7c44d078b1f0607b2388f29d729/extensions/node_modules/typescript/lib/lib.dom.d.ts") | Retrieves an element from the DOM using its ID.                                                                                                                                                                                                                                                                                                                                                                 | [`document.getElementById('myCanvas')`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fvscode%2Fvscode-server%2Fbin%2Flinux-x64%2Ff1e16e1e6214d7c44d078b1f0607b2388f29d729%2Fextensions%2Fnode_modules%2Ftypescript%2Flib%2Flib.dom.d.ts%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A27567%2C%22character%22%3A0%7D%5D "../../vscode/vscode-server/bin/linux-x64/f1e16e1e6214d7c44d078b1f0607b2388f29d729/extensions/node_modules/typescript/lib/lib.dom.d.ts") |
| `getContext('2d')`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Method used on a `<canvas>` element to obtain the rendering context and its drawing functions.                                                                                                                                                                                                                                                                                                                  | [`canvas.getContext('2d')`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A213%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js")                                                                                                                                                                     |
| [`await`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A416%2C%22character%22%3A16%7D%5D "solutions/03-space-game/app.js")                                                                                                                                                                          | Operator used to wait for a Promise to resolve before continuing execution.                                                                                                                                                                                                                                                                                                                                     | [`await loadTexture('...')`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A226%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js")                                                                                                                                                                    |
| `async`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Keyword used to declare an asynchronous function that can contain [`await`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A416%2C%22character%22%3A16%7D%5D "solutions/03-space-game/app.js") expressions. | [`window.onload = async () => {...}`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fvscode%2Fvscode-server%2Fbin%2Flinux-x64%2Ff1e16e1e6214d7c44d078b1f0607b2388f29d729%2Fextensions%2Fnode_modules%2Ftypescript%2Flib%2Flib.dom.d.ts%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A27720%2C%22character%22%3A0%7D%5D "../../vscode/vscode-server/bin/linux-x64/f1e16e1e6214d7c44d078b1f0607b2388f29d729/extensions/node_modules/typescript/lib/lib.dom.d.ts")   |

This section of the [`app.js`](command:_github.copilot.openRelativePath?%5B%7B%22scheme%22%3A%22file%22%2C%22authority%22%3A%22%22%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22query%22%3A%22%22%2C%22fragment%22%3A%22%22%7D%5D "/workspaces/html-css-and-javascript-building-the-web-4479542/solutions/03-space-game/app.js") file is primarily concerned with initializing the game once the window has fully loaded. It does this by first obtaining a reference to the canvas element and its 2D rendering context. Then, it asynchronously loads several images that will be used throughout the game, such as the player character, enemy ships, and various states of the player character (e.g., moving left, right, and damaged). This is achieved through the use of asynchronous functions (`async`/[`await`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A416%2C%22character%22%3A16%7D%5D "solutions/03-space-game/app.js")) to ensure that the game does not start until all necessary assets are fully loaded, thereby avoiding potential issues with missing textures.

## 3. Follow Metaprompts

> ðŸŒŸ | You may see "metaprompts" suggested as part of the response. Click on them to intuitively build more intuition about the application domain and web development process.

Here are some metaprompts I got after the explainer for `app.js`

- What are some common JavaScript events that can be used to trigger functions in web development?
- What are some common methods for handling JavaScript events in web development?
- What are some common methods for manipulating the DOM in JavaScript?

> ðŸŒŸ | You can also start a new question on a relevant topic, to trigger a new set of metaprompts.

For instance, try this prompt instead:

```text
Tell me more about the Canvas API used in app.js using short bullet points
```

You'll get a response like this:

- The Canvas API provides a means to draw graphics via JavaScript and the HTML `<canvas>` element.
- It can be used for rendering graphs, game graphics, or other visual images on the fly.
- The API supports two contexts: `2d` and `webgl`. `2d` is for drawing shapes, text, images, and other objects. `webgl` is used for rendering interactive 3D graphics.
- Operations include drawing paths, boxes, circles, characters, and adding images.
- It allows for dynamic, scriptable rendering of 2D shapes and bitmap images.
- The Canvas API includes features for manipulating colors, styles, gradients, and patterns.
- It supports event handling, allowing interaction through mouse and touch events.
- Animation can be achieved by repeatedly clearing and redrawing the canvas.
- It's widely supported across modern browsers without the need for plugins.
- Performance can vary based on the complexity of the scenes being rendered and the capabilities of the user's device.

Followed by a metaprompt like this:

- How can I draw a rectangle on the canvas using the Canvas API?
- How can I draw a circle on the canvas using the Canvas API?

> ðŸŒŸ | You can also select any segment of the code in the editor, and use the _inline_ chat feature with a simple `/explain` command. **You should see something like this:**

The provided code snippet is from a JavaScript file called [`app.js`](command:_github.copilot.openRelativePath?%5B%7B%22scheme%22%3A%22file%22%2C%22authority%22%3A%22%22%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22query%22%3A%22%22%2C%22fragment%22%3A%22%22%7D%5D "/workspaces/html-css-and-javascript-building-the-web-4479542/solutions/03-space-game/app.js"). It seems to be part of a game development project. Let's go through the code and understand what it does.

First, the code sets up an event listener for the [`window.onload`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fvscode%2Fvscode-server%2Fbin%2Flinux-x64%2Ff1e16e1e6214d7c44d078b1f0607b2388f29d729%2Fextensions%2Fnode_modules%2Ftypescript%2Flib%2Flib.dom.d.ts%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A27720%2C%22character%22%3A0%7D%5D "../../vscode/vscode-server/bin/linux-x64/f1e16e1e6214d7c44d078b1f0607b2388f29d729/extensions/node_modules/typescript/lib/lib.dom.d.ts") event. This means that the code inside the event handler will be executed when the window finishes loading. The event handler is defined as an asynchronous function using the `async` keyword.

Inside the event handler, the code retrieves a reference to an HTML canvas element with the id "myCanvas" using the [`document.getElementById`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fvscode%2Fvscode-server%2Fbin%2Flinux-x64%2Ff1e16e1e6214d7c44d078b1f0607b2388f29d729%2Fextensions%2Fnode_modules%2Ftypescript%2Flib%2Flib.dom.d.ts%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A27567%2C%22character%22%3A0%7D%5D "../../vscode/vscode-server/bin/linux-x64/f1e16e1e6214d7c44d078b1f0607b2388f29d729/extensions/node_modules/typescript/lib/lib.dom.d.ts") method. It also gets the 2D rendering context of the canvas using the `getContext` method and assigns it to the variable [`ctx`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A225%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js").

The code then proceeds to load several textures asynchronously using the [`loadTexture`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A237%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js") function. The [`loadTexture`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A237%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js") function takes a path as an argument and returns a promise. It creates a new `Image` object, sets its source to the provided path, and waits for the image to load using the [`onload`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fvscode%2Fvscode-server%2Fbin%2Flinux-x64%2Ff1e16e1e6214d7c44d078b1f0607b2388f29d729%2Fextensions%2Fnode_modules%2Ftypescript%2Flib%2Flib.dom.d.ts%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A9253%2C%22character%22%3A4%7D%5D "../../vscode/vscode-server/bin/linux-x64/f1e16e1e6214d7c44d078b1f0607b2388f29d729/extensions/node_modules/typescript/lib/lib.dom.d.ts") event. Once the image is loaded, the promise is resolved with the loaded image.

The loaded textures are assigned to different variables such as [`heroImg`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A226%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js"), [`monsterImg`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A231%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js"), [`laserRedImg`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A221%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js"), etc. These variables will be used later in the game for rendering different elements.

After loading the textures, the code sets some initial game state variables. It sets [`game.ready`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A235%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js") to `true`, indicating that the game is ready to be played, and [`game.end`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A235%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js") to `true`, indicating that the game has not started yet. Then, it clears the canvas using the `clearRect` method, fills the canvas with a black color using the `fillStyle` and `fillRect` methods, and displays a message on the canvas using the [`displayMessage`](command:_github.copilot.openSymbolFromReferences?%5B%7B%22%24mid%22%3A1%2C%22path%22%3A%22%2Fworkspaces%2Fhtml-css-and-javascript-building-the-web-4479542%2Fsolutions%2F03-space-game%2Fapp.js%22%2C%22scheme%22%3A%22file%22%7D%2C%7B%22line%22%3A343%2C%22character%22%3A0%7D%5D "solutions/03-space-game/app.js") function. The message says "Press [Enter] to start the game Captain Pew Pew" and is displayed in blue color.

Finally, the code includes some comments outlining the remaining tasks or features that need to be implemented in the game. These include drawing and moving monsters, handling collisions between monsters and the hero, adding explosions, meteors, UFOs, and bullets, and implementing various game mechanics.

In summary, the provided code sets up the initial state of a game, loads textures asynchronously, and displays a message on the canvas. It also includes comments outlining the remaining tasks or features to be implemented in the game.
